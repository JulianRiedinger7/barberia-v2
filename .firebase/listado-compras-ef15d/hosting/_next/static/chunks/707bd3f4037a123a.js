(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,37727,e=>{"use strict";let t=(0,e.i(75254).default)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);e.s(["X",()=>t],37727)},7233,e=>{"use strict";let t=(0,e.i(75254).default)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);e.s(["Plus",()=>t],7233)},55436,e=>{"use strict";let t=(0,e.i(75254).default)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]);e.s(["Search",()=>t],55436)},88699,27612,e=>{"use strict";var t=e.i(75254);let s=(0,t.default)("pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);e.s(["Pencil",()=>s],88699);let r=(0,t.default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);e.s(["Trash2",()=>r],27612)},87316,e=>{"use strict";let t=(0,e.i(75254).default)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);e.s(["Calendar",()=>t],87316)},63488,e=>{"use strict";let t=(0,e.i(75254).default)("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]]);e.s(["Mail",()=>t],63488)},43432,e=>{"use strict";let t=(0,e.i(75254).default)("phone",[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]]);e.s(["Phone",()=>t],43432)},53912,e=>{"use strict";var t=e.i(14985);e.i(36180);var s=e.i(98925);let r="clients";function a(e){let a=(0,s.query)((0,s.collection)(t.db,r),(0,s.orderBy)("totalSpent","desc"));return(0,s.onSnapshot)(a,t=>{e(t.docs.map(e=>{let t=e.data();return{id:e.id,...t,lastVisit:t.lastVisit?t.lastVisit.toDate():void 0}}))})}async function l(e){return(0,s.addDoc)((0,s.collection)(t.db,r),e)}async function d(e,a){let l=(0,s.doc)(t.db,r,e);return(0,s.updateDoc)(l,a)}async function o(e){let a=(0,s.doc)(t.db,r,e);return(0,s.deleteDoc)(a)}e.s(["addClient",()=>l,"deleteClient",()=>o,"subscribeToClients",()=>a,"updateClient",()=>d])},37012,e=>{"use strict";var t=e.i(43476),s=e.i(71645),r=e.i(55436),a=e.i(63488),l=e.i(43432),d=e.i(87316),o=e.i(31278),n=e.i(7233),i=e.i(88699),c=e.i(27612),m=e.i(53912),u=e.i(37727);function x({isOpen:e,onClose:r,onSave:a,initialData:l}){let[d,o]=(0,s.useState)({fullName:"",email:"",phone:"",notes:"",totalSpent:0,lastVisit:new Date}),[n,i]=(0,s.useState)(!1);if((0,s.useEffect)(()=>{l?o({fullName:l.fullName,email:l.email,phone:l.phone,notes:l.notes||"",totalSpent:l.totalSpent,lastVisit:l.lastVisit||new Date}):o({fullName:"",email:"",phone:"",notes:"",totalSpent:0,lastVisit:new Date})},[l,e]),!e)return null;let c=async e=>{e.preventDefault(),i(!0);try{await a(d),r()}catch(e){console.error("Error saving client:",e)}finally{i(!1)}};return(0,t.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm",children:(0,t.jsxs)("div",{className:"bg-card border border-border rounded-lg shadow-lg w-full max-w-md p-6 relative",children:[(0,t.jsx)("button",{onClick:r,className:"absolute top-4 right-4 text-muted-foreground hover:text-foreground",children:(0,t.jsx)(u.X,{size:20})}),(0,t.jsx)("h2",{className:"text-xl font-bold mb-4",children:l?"Editar Cliente":"Nuevo Cliente"}),(0,t.jsxs)("form",{onSubmit:c,className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Nombre Completo"}),(0,t.jsx)("input",{type:"text",required:!0,className:"w-full bg-secondary/30 border border-border rounded-md px-3 py-2 outline-none focus:border-primary",value:d.fullName,onChange:e=>o({...d,fullName:e.target.value})})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Email"}),(0,t.jsx)("input",{type:"email",required:!0,className:"w-full bg-secondary/30 border border-border rounded-md px-3 py-2 outline-none focus:border-primary",value:d.email,onChange:e=>o({...d,email:e.target.value})})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Teléfono"}),(0,t.jsx)("input",{type:"tel",required:!0,className:"w-full bg-secondary/30 border border-border rounded-md px-3 py-2 outline-none focus:border-primary",value:d.phone,onChange:e=>o({...d,phone:e.target.value})})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Notas"}),(0,t.jsx)("textarea",{className:"w-full bg-secondary/30 border border-border rounded-md px-3 py-2 outline-none focus:border-primary resize-none h-20",value:d.notes,onChange:e=>o({...d,notes:e.target.value})})]}),(0,t.jsx)("input",{type:"hidden",value:d.totalSpent}),(0,t.jsxs)("div",{className:"flex justify-end gap-2 mt-6",children:[(0,t.jsx)("button",{type:"button",onClick:r,className:"px-4 py-2 text-sm font-medium hover:bg-secondary rounded-md transition-colors",children:"Cancelar"}),(0,t.jsx)("button",{type:"submit",disabled:n,className:"px-4 py-2 text-sm font-medium bg-primary text-primary-foreground rounded-md hover:bg-primary/90 transition-colors disabled:opacity-50",children:n?"Guardando...":"Guardar"})]})]})]})})}function h(){let[e,u]=(0,s.useState)(""),[h,p]=(0,s.useState)([]),[f,b]=(0,s.useState)(!0),[y,j]=(0,s.useState)(!1),[g,v]=(0,s.useState)(void 0);(0,s.useEffect)(()=>{let e=(0,m.subscribeToClients)(e=>{p(e),b(!1)});return()=>e()},[]);let N=async e=>{g?await (0,m.updateClient)(g.id,e):await (0,m.addClient)(e)},C=async(e,t)=>{confirm(`\xbfEst\xe1s seguro de eliminar a ${t}?`)&&await (0,m.deleteClient)(e)},k=h.filter(t=>t.fullName.toLowerCase().includes(e.toLowerCase())||t.email.toLowerCase().includes(e.toLowerCase()));return f?(0,t.jsx)("div",{className:"h-full flex items-center justify-center",children:(0,t.jsx)(o.Loader2,{className:"h-8 w-8 animate-spin text-primary"})}):(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("h2",{className:"text-3xl font-serif font-bold text-foreground",children:"Clientes"}),(0,t.jsxs)("button",{onClick:()=>{v(void 0),j(!0)},className:"bg-primary text-primary-foreground px-4 py-2 rounded-md font-medium text-sm flex items-center gap-2 hover:bg-primary/90 transition-colors",children:[(0,t.jsx)(n.Plus,{size:18}),"Nuevo Cliente"]})]}),(0,t.jsxs)("div",{className:"bg-card border border-border rounded-lg overflow-hidden",children:[(0,t.jsxs)("div",{className:"p-4 border-b border-border flex gap-4",children:[(0,t.jsxs)("div",{className:"relative flex-1 max-w-sm",children:[(0,t.jsx)(r.Search,{size:18,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground"}),(0,t.jsx)("input",{type:"text",placeholder:"Buscar por nombre o email...",className:"w-full bg-secondary/30 border border-border rounded-md pl-10 pr-4 py-2 text-sm outline-none focus:border-primary transition-colors",value:e,onChange:e=>u(e.target.value)})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("button",{className:"px-4 py-2 text-sm font-medium border border-border rounded-md hover:bg-secondary",children:"Filtros"}),(0,t.jsx)("button",{className:"px-4 py-2 text-sm font-medium border border-border rounded-md hover:bg-secondary",children:"Exportar"})]})]}),(0,t.jsxs)("table",{className:"w-full text-left",children:[(0,t.jsx)("thead",{className:"bg-secondary/50 border-b border-border",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"p-4 font-medium text-muted-foreground",children:"Cliente"}),(0,t.jsx)("th",{className:"p-4 font-medium text-muted-foreground",children:"Contacto"}),(0,t.jsx)("th",{className:"p-4 font-medium text-muted-foreground",children:"Última Visita"}),(0,t.jsx)("th",{className:"p-4 font-medium text-muted-foreground",children:"Total Gastado"}),(0,t.jsx)("th",{className:"p-4 font-medium text-muted-foreground",children:"Notas"}),(0,t.jsx)("th",{className:"p-4 font-medium text-muted-foreground text-right",children:"Acciones"})]})}),(0,t.jsx)("tbody",{className:"divide-y divide-border",children:0===k.length?(0,t.jsx)("tr",{children:(0,t.jsx)("td",{colSpan:6,className:"p-8 text-center text-muted-foreground",children:"No se encontraron clientes."})}):k.map(e=>(0,t.jsxs)("tr",{className:"hover:bg-secondary/20 transition-colors",children:[(0,t.jsxs)("td",{className:"p-4",children:[(0,t.jsx)("div",{className:"font-medium text-foreground",children:e.fullName}),(0,t.jsxs)("div",{className:"text-xs text-muted-foreground",children:["ID: #",e.id.slice(0,8)]})]}),(0,t.jsxs)("td",{className:"p-4 space-y-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[(0,t.jsx)(a.Mail,{size:14}),e.email]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[(0,t.jsx)(l.Phone,{size:14}),e.phone]})]}),(0,t.jsx)("td",{className:"p-4 text-sm",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(d.Calendar,{size:14,className:"text-muted-foreground"}),e.lastVisit?e.lastVisit.toLocaleDateString():"N/A"]})}),(0,t.jsxs)("td",{className:"p-4 font-mono font-medium text-primary",children:["$",e.totalSpent.toLocaleString()]}),(0,t.jsx)("td",{className:"p-4 text-sm text-muted-foreground italic max-w-xs truncate",children:e.notes||"-"}),(0,t.jsx)("td",{className:"p-4 text-right",children:(0,t.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,t.jsx)("button",{onClick:()=>{v(e),j(!0)},className:"p-2 text-muted-foreground hover:text-primary hover:bg-secondary rounded transition-colors",children:(0,t.jsx)(i.Pencil,{size:18})}),(0,t.jsx)("button",{onClick:()=>C(e.id,e.fullName),className:"p-2 text-muted-foreground hover:text-red-500 hover:bg-secondary rounded transition-colors",children:(0,t.jsx)(c.Trash2,{size:18})})]})})]},e.id))})]}),(0,t.jsx)("div",{className:"p-4 border-t border-border flex justify-between items-center text-sm text-muted-foreground",children:(0,t.jsxs)("span",{children:["Mostrando ",k.length," de ",h.length," clientes"]})})]}),(0,t.jsx)(x,{isOpen:y,onClose:()=>j(!1),onSave:N,initialData:g})]})}e.s(["default",()=>h],37012)}]);